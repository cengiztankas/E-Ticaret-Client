"use strict";(self.webpackChunkETICARETCLIENT=self.webpackChunkETICARETCLIENT||[]).push([[525],{9525:(q,h,a)=>{a.r(h),a.d(h,{UserModule:()=>X});var d=a(6814),t=a(5879),u=a(5861),l=a(5313),c=a(7294),g=a(3110),f=a(830),_=a(1939),m=a(7700),C=a(1021),Z=a(5921),T=a(8672),U=a(2296),v=a(9038);function x(e,o){if(1&e&&(t.TgZ(0,"mat-list-option",6),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.s9C("selected",n.selected),t.xp6(1),t.hij(" ",n.name," ")}}let y=(()=>{class e extends _.v{constructor(n,s,i,r,p){super(n),this.data=s,this.userService=i,this.roleService=r,this.spinner=p}ngOnInit(){var n=this;return(0,u.Z)(function*(){n.spinner.show(c.Z.Timer),n.assignedRoles=yield n.userService.getRolesToUser(n.data,()=>n.spinner.hide(c.Z.Timer)),console.log(n.assignedRoles),n.roles=yield n.roleService.getRoles(-1,-1),n.listRoles=n.roles.datas.map(s=>({name:s.name,selected:n.assignedRoles?.indexOf(s.name)>-1}))})()}assignRoles(n){const s=n.selectedOptions.selected.map(i=>i._unscopedContent.nativeElement.innerText);this.spinner.show(c.Z.Timer),this.userService.assignRoleToUser(this.data,s,()=>{this.spinner.hide(c.Z.Timer)},i=>{})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(m.so),t.Y36(m.WI),t.Y36(C.K),t.Y36(Z.N),t.Y36(T.t2))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-authorize-user-dialog"]],features:[t.qOj],decls:12,vars:2,consts:[["mat-dialog-content",""],["rolesComponent",""],[3,"selected",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close","click"],[3,"selected"]],template:function(s,i){if(1&s){const r=t.EpF();t.TgZ(0,"div",0)(1,"p"),t._uU(2,"\u0130lgili sayfaya a\u015fa\u011f\u0131dan rolleri atayabilirsiniz."),t.qZA()(),t.TgZ(3,"div",0)(4,"mat-selection-list",null,1),t.YNc(6,x,2,2,"mat-list-option",2),t.qZA()(),t.TgZ(7,"div",3)(8,"button",4),t.NdJ("click",function(){return i.Close()}),t._uU(9,"\u0130ptal"),t.qZA(),t.TgZ(10,"button",5),t.NdJ("click",function(){t.CHM(r);const V=t.MAs(5);return t.KtG(i.assignRoles(V))}),t._uU(11,"Rolleri Ata"),t.qZA()()}2&s&&(t.xp6(6),t.Q6J("ngForOf",i.listRoles),t.xp6(4),t.Q6J("mat-dialog-close",i.data))},dependencies:[d.sg,m.ZT,m.xY,m.H8,U.lW,v.Ub,v.vS]})}return e})();var A=a(3584),N=a(6425);function S(e,o){1&e&&(t.TgZ(0,"th",15),t._uU(1," Email "),t.qZA())}function Y(e,o){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.email," ")}}function L(e,o){1&e&&(t.TgZ(0,"th",15),t._uU(1," Kullan\u0131c\u0131 Ad\u0131 "),t.qZA())}function R(e,o){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.userName," ")}}function D(e,o){1&e&&(t.TgZ(0,"th",15),t._uU(1," Name "),t.qZA())}function I(e,o){if(1&e&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.nameSurname," ")}}function E(e,o){1&e&&(t.TgZ(0,"th",15),t._uU(1," twoFactorEnabled "),t.qZA())}function F(e,o){1&e&&t._UZ(0,"img",20)}function O(e,o){1&e&&t._UZ(0,"img",21)}function Q(e,o){if(1&e&&(t.TgZ(0,"td",17),t.YNc(1,F,1,0,"img",18),t.YNc(2,O,1,0,"img",19),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("ngIf",n.twoFactorEnabled),t.xp6(1),t.Q6J("ngIf",!n.twoFactorEnabled)}}function z(e,o){1&e&&t._UZ(0,"th",15)}function J(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",16)(1,"button",22),t.NdJ("click",function(){const r=t.CHM(n).$implicit,p=t.oxw();return t.KtG(p.assignRole(r.id))}),t._uU(2,"Role Ata"),t.qZA()()}}function B(e,o){1&e&&t._UZ(0,"th",15)}function M(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",23),t.NdJ("callBack",function(){t.CHM(n);const i=t.oxw();return t.KtG(i.GetUsers())}),t.qZA()}2&e&&t.Q6J("id",o.$implicit.id)}function w(e,o){1&e&&t._UZ(0,"tr",24)}function G(e,o){1&e&&t._UZ(0,"tr",25)}const b=function(){return[5,10,20]};let H=(()=>{class e extends c.H{constructor(n,s,i,r){super(s),this.userService=n,this.alertifyService=i,this.dialogService=r,this.displayedColumns=["email","userName","nameSurname","twoFactorEnabled","assignRole","delete"],this.dataSource=null}ngOnInit(){var n=this;return(0,u.Z)(function*(){yield n.GetUsers()})()}GetUsers(){var n=this;return(0,u.Z)(function*(){const s=yield n.userService.GetAllUsers(n.paginator?n.paginator.pageIndex:0,n.paginator?n.paginator.pageSize:5,()=>{n.HideSpinner(c.Z.Timer)},i=>{n.alertifyService.message({dismissOthers:!0,message:i,messageType:g.v.Error,position:g.k_.TopRight})});console.log(s.users),n.dataSource=new l.by(s.users),n.paginator.length=s.totalUsersCount})()}assignRole(n){this.dialogService.openDialog({ComponentType:y,data:n,afterClosed:()=>{}})}pageChange(){var n=this;return(0,u.Z)(function*(){yield n.GetUsers()})()}delete(n,s){$(s.srcElement.parentElement.parentElement).fadeOut(1e3)}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(C.K),t.Y36(T.t2),t.Y36(g.vT),t.Y36(A.xA))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-user-list"]],viewQuery:function(s,i){if(1&s&&t.Gf(f.NW,5),2&s){let r;t.iGM(r=t.CRH())&&(i.paginator=r.first)}},features:[t.qOj],decls:23,vars:5,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],["matColumnDef","email"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","userName"],["matColumnDef","nameSurname"],["matColumnDef","twoFactorEnabled"],["mat-cell","","class","isIcon",4,"matCellDef"],["matColumnDef","assignRole"],["matColumnDef","delete"],["class","icon","mat-cell","","controller","users","appDelete","",3,"id","callBack",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page\n                    of periodic elements",3,"pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"isIcon"],["class","editIcon","src","../../../../../assets/img/completed.png","alt","",4,"ngIf"],["class","editIcon","src","../../../../../assets/img/notCompleted.png","alt","",4,"ngIf"],["src","../../../../../assets/img/completed.png","alt","",1,"editIcon"],["src","../../../../../assets/img/notCompleted.png","alt","",1,"editIcon"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],["mat-cell","","controller","users","appDelete","",1,"icon",3,"id","callBack"],["mat-header-row",""],["mat-row",""]],template:function(s,i){1&s&&(t.TgZ(0,"div",0)(1,"table",1),t.ynx(2,2),t.YNc(3,S,2,0,"th",3),t.YNc(4,Y,2,1,"td",4),t.BQk(),t.ynx(5,5),t.YNc(6,L,2,0,"th",3),t.YNc(7,R,2,1,"td",4),t.BQk(),t.ynx(8,6),t.YNc(9,D,2,0,"th",3),t.YNc(10,I,2,1,"td",4),t.BQk(),t.ynx(11,7),t.YNc(12,E,2,0,"th",3),t.YNc(13,Q,3,2,"td",8),t.BQk(),t.ynx(14,9),t.YNc(15,z,1,0,"th",3),t.YNc(16,J,3,0,"td",4),t.BQk(),t.ynx(17,10),t.YNc(18,B,1,0,"th",3),t.YNc(19,M,1,1,"td",11),t.BQk(),t.YNc(20,w,1,0,"tr",12),t.YNc(21,G,1,0,"tr",13),t.qZA(),t.TgZ(22,"mat-paginator",14),t.NdJ("page",function(){return i.pageChange()}),t.qZA()()),2&s&&(t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(4,b)))},dependencies:[d.O5,f.NW,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,N.R],styles:["table[_ngcontent-%COMP%]{width:100%}.fotoIcon[_ngcontent-%COMP%]{width:25px}.icon[_ngcontent-%COMP%]{padding:1rem!important;width:20px!important;cursor:pointer}.success[_ngcontent-%COMP%]{color:green;font-size:1.1rem}.danger[_ngcontent-%COMP%]{color:#deb887;width:20px;height:20px}.isIcon[_ngcontent-%COMP%]{text-align:right;width:1rem!important}"]})}return e})(),j=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-user"]],decls:1,vars:0,template:function(s,i){1&s&&t._UZ(0,"app-user-list")},dependencies:[H]})}return e})();var k=a(8109),K=a(2032),P=a(1937);let W=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[d.ez,K.c,U.ot,f.TU,l.p0,P.y]})}return e})(),X=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#n=this.\u0275inj=t.cJS({imports:[d.ez,W,k.Bz.forChild([{path:"",component:j}])]})}return e})()}}]);